############################################################
# 1. Terminal & Color Handling
############################################################

set -g default-terminal "tmux-256color"
set -as terminal-features ",xterm-256color:RGB"

# Why:
# - Required for correct colors in Neovim
# - WezTerm supports RGB over SSH

############################################################
# 2. Responsiveness (Neovim-friendly)
############################################################

set -sg escape-time 0

# Why:
# - Removes ESC delay in Neovim
# Alternative:
# - 10â€“50 if you rely on Alt-key chords

############################################################
# 3. Window & Pane Indexing
############################################################

set -g base-index 1
setw -g pane-base-index 1
set -g renumber-windows on

# Why:
# - Predictable Ctrl-a 1..9 navigation
# - No gaps after closing windows

############################################################
# 4. Mouse Support
############################################################

set -g mouse on

# Why:
# - Scrollback and resize over SSH
# Turn off if you want strict keyboard-only

############################################################
# 5. Prefix Key
############################################################

unbind C-b
set -g prefix C-a
bind C-a send-prefix

# Why:
# - Screen-compatible
# - Less finger travel
# send-prefix allows nested tmux

############################################################
# 6. Window Management (Number-centric)
############################################################

unbind c
unbind n
unbind p

bind n new-window

# Philosophy:
# - Windows are addresses, not a list
# - Jump by number, never cycle

############################################################
# 7. Pane Splitting (Path-aware)
############################################################

bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"

# Why:
# - Keeps working directory
# - Essential for dev workflows

############################################################
# 8. Pane Navigation (Vim-style)
############################################################

bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Why:
# - Matches Neovim muscle memory

############################################################
# 9. Pane Resizing
############################################################

bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# Why:
# - Fast, repeatable resizing
# Alternative sizes: 1 (precise), 10 (coarse)

############################################################
# 10. Copy Mode (Vi)
############################################################

setw -g mode-keys vi

bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi y send -X copy-selection-and-cancel

# Why:
# - Consistent with Vim habits
# - No mouse dependency

############################################################
# 11. Status Bar (Minimal + Session Name)
############################################################

set -g status on
set -g status-interval 5
set -g status-style "bg=default,fg=colour245"

# LEFT: session name
set -g status-left-length 30
set -g status-left "#[bold,fg=colour39]#S "

# RIGHT: date, time, host
set -g status-right-length 50
set -g status-right "#[fg=colour245]%Y-%m-%d %H:%M #[fg=colour39]#H"

# Window list
set -g window-status-format " #I:#W "
set -g window-status-current-format "#[bold,fg=colour39] #I:#W "

# Why session name on the left:
# - Always visible
# - Anchors context (main, prod, test, etc.)
# - Especially important when SSH-ing into multiple machines

############################################################
# 12. SSH / Performance Sanity
############################################################

set -g assume-paste-time 0
set -g repeat-time 300
set -g set-clipboard on

# Why:
# - Lower latency over SSH
# - Clipboard works with WezTerm (OSC52)

############################################################
# 13. Reload Config
############################################################

bind r source-file ~/.tmux.conf \; display-message "tmux reloaded"
